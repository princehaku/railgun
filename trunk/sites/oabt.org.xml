<?xml version="1.0" encoding="UTF-8"?>
<shell xmlns="http://railgun.techest.net" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://railgun.techest.net shell.xsd">
    <name>oabt</name>
    <description>我爱P2P电影抓取</description>
    <baseurl>*</baseurl>
    <reloadtime>3600000</reloadtime>
    <stair>
        <fetch>
            <url>http://oabt.org/?page=$[1,2]</url>
        </fetch>
        <parse method="dom">
            <rule>.toplist tbody</rule>
        </parse>
        <!--<filestore>
            <path>cache/$hash.html</path>
            <data>$result</data>
        </filestore>-->
        <dbstore source="db1">
            <mapping form="origin" consist="hash">
                <enty>
                    <name>url</name>
                    <content>${url}</content>
                </enty>
                <enty>
                    <name>hash</name>
                    <content>$hash</content>
                </enty>
                <enty>
                    <name>source</name>
                    <content>$result</content>
                </enty>
                <enty>
                    <name>fetchtime</name>
                    <content>$date $time</content>
                </enty>
            </mapping>
        </dbstore>
        <handler>OabtHandler</handler>
        <index>
            <data consist="hash">
                <enty>
                    <name>id</name>
                    <content>${id}</content>
                    <type>text</type>
                </enty>
                <enty>
                    <name>url</name>
                    <content>${url}</content>
                    <type>text</type>
                </enty>
                <enty>
                    <name>hash</name>
                    <content>$hash</content>
                    <type>index</type>
                </enty>
                <enty>
                    <name>source</name>
                    <content>$result</content>
                    <type>fulltext</type>
                </enty>
                <enty>
                    <name>fetchtime</name>
                    <content>$date $time</content>
                    <type>text</type>
                </enty>
            </data>
        </index><!---->
    </stair>
</shell>
